<!DOCTYPE html>
<!--
 @license
 Copyright 2019 Google LLC. All Rights Reserved.
 SPDX-License-Identifier: Apache-2.0
-->
<html>
  <head>
    <title>Displaying Text Directions With setPanel()</title>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
    <script>
      /**
       * @license
       * Copyright 2019 Google LLC. All Rights Reserved.
       * SPDX-License-Identifier: Apache-2.0
       */
      function initMap() {
        const directionsRenderer = new google.maps.DirectionsRenderer();
        const directionsRenderer2 = new google.maps.DirectionsRenderer();
        const directionsRenderer3 = new google.maps.DirectionsRenderer();
        const directionsService = new google.maps.DirectionsService();
        const map = new google.maps.Map(document.getElementById("map"), {
          zoom: 7,
          center: { lat: 41.85, lng: -87.65 },
          disableDefaultUI: true,
        });


        directionsRenderer.setMap(map);
        directionsRenderer.setPanel(document.getElementById("sidebar"));
        directionsRenderer2.setMap(map);
        directionsRenderer2.setPanel(document.getElementById("sidebar"));
        directionsRenderer3.setMap(map);
        directionsRenderer3.setPanel(document.getElementById("sidebar"));
        

        const control = document.getElementById("floating-panel");

        map.controls[google.maps.ControlPosition.TOP_CENTER].push(control);

        const fastestroute = function () {
          if (document.getElementById("start").value.trim() !=="" && document.getElementById("end").value.trim() !=="" && document.getElementById("mode").value.trim()!=="") {
            calculateAndDisplayRoute(directionsService,  directionsRenderer);}
        };
        document
          .getElementById("start")
          .addEventListener("change", fastestroute);
        document
          .getElementById("end")
          .addEventListener("change", fastestroute);
        document
          .getElementById("mode")
          .addEventListener("change", fastestroute);
        
        const cheapestroute = function () {
          if (document.getElementById("start").value.trim() !=="" && document.getElementById("end").value.trim()!=="" && document.getElementById("mode").value.trim()!=="") {
            newfunc(directionsService, directionsRenderer2);}
        };

        document
          .getElementById("start")
          .addEventListener("change", cheapestroute);
        document
          .getElementById("end")
          .addEventListener("change", cheapestroute);
        document
          .getElementById("mode")
          .addEventListener("change", cheapestroute);
      

      const otherroute = function () {
          if (document.getElementById("start").value.trim() !=="" && document.getElementById("end").value.trim()!=="" && document.getElementById("mode").value.trim()!=="") {
            newfunc2(directionsService, directionsRenderer3);}
        };

        document
          .getElementById("start")
          .addEventListener("change", otherroute);
        document
          .getElementById("end")
          .addEventListener("change", otherroute);
        document
          .getElementById("mode")
          .addEventListener("change", otherroute);

      //add routes with correct directions
      //add markers with correct locations
      //add information about markers (what, when, cost, etc)
      //overall info window, cost and time
  


      const randcoor = { lat: 34.0549, lng: -118.2426 };

      addMarker( { lat: 34.0549, lng: -118.2426 }, map, "1");
      addMarker( { lat: 41.0549, lng: -90.2426 }, map, "2");
      addMarker( { lat: 42.0549, lng: -76.2426 }, map, "3");
  
      }

      function addMarker(randcoor, map, name){
          const marker = new google.maps.Marker({
          position: randcoor,
          label: name,
          map,
          title: "Click to zoom",
        });

        marker.addListener("click", () => {
          map.setZoom(8);
          map.setCenter(marker.getPosition());
        });
      }

      function calculateAndDisplayRoute(directionsService, directionsRenderer) {
        const start = document.getElementById("start").value;
        const end = document.getElementById("end").value;
        const selectedMode = document.getElementById("mode").value;

        directionsService
          .route({
            origin: start,
            destination: end,
            travelMode: google.maps.TravelMode[selectedMode],
          })
          .then((response) => {
            directionsRenderer.setDirections(response);
            console.log(response)
          })
          .catch((e) =>
            {}
          );
      }

      function newfunc(directionsService, directionsRenderer) {
        const start = document.getElementById("start").value;
        const end = document.getElementById("end").value;
        const selectedMode = document.getElementById("mode").value;

        directionsService
          .route({
            origin: "St. Louis, MO",
            destination: end,
            travelMode: google.maps.TravelMode[selectedMode],
          })
          .then((response) => {
            directionsRenderer.setDirections(response);
          })
          .catch((e) =>
          {}
          );
      }
      function newfunc2(directionsService, directionsRenderer) {
        const start = document.getElementById("start").value;
        const end = document.getElementById("end").value;
        const selectedMode = document.getElementById("mode").value;

        directionsService
          .route({
            origin: "Columbus, OH",
            destination: end,
            travelMode: google.maps.TravelMode[selectedMode],
          })
          .then((response) => {
            directionsRenderer.setDirections(response);
          })
          .catch((e) =>
          {}
          );
      }

      
    document.addEventListener('DOMContentLoaded', function() {
    var citiesArray = [
       "Akron, OH", "Albuquerque, NM", "Anaheim, CA", "Arlington, TX", "Arlington, VA", "Atlanta, GA", "Aurora, CO", "Austin, TX", "Bakersfield, CA", "Baltimore, MD", "Baton Rouge, LA", "Birmingham, AL", "Boston, MA", "Buffalo, NY", "Chandler, AZ", "Charlotte, NC", "Chesapeake, VA", "Chicago, IL", "Chula Vista, CA", "Cincinnati, OH", "Cleveland, OH", "Colorado Springs, CO", "Columbus, OH", "Corpus Christi, TX", "Dallas, TX", "Denver, CO", "Detroit, MI", "Durham, NC", "El Paso, TX", "Fort Wayne, IN", "Fort Worth, TX", "Fresno, CA", "Garland, TX", "Gilbert, AZ", "Glendale, AZ", "Greensboro, NC", "Henderson, NV", "Hialeah, FL", "Houston, TX", "Indianapolis, IN", "Irvine, CA", "Jacksonville, FL", "Jersey City, NJ", "Kansas City, MO", "Laredo, TX", "Las Vegas, NV", "Lexington, KY", "Lincoln, NE", "Long Beach, CA", "Los Angeles, CA", "Louisville, KY", "Lubbock, TX", "Madison, WI", "Memphis, TN", "Mesa, AZ", "Miami, FL", "Milwaukee, WI", "Minneapolis, MN", "Nashville, TN", "New Orleans, LA", "New York, NY", "Newark, NJ", "Norfolk, VA", "North Las Vegas, NV", "Oakland, CA", "Oklahoma City, OK", "Omaha, NE", "Orlando, FL", "Philadelphia, PA", "Phoenix, AZ", "Pittsburgh, PA", "Plano, TX", "Portland, OR", "Raleigh, NC", "Reno, NV", "Riverside, CA", "Sacramento, CA", "San Antonio, TX", "San Diego, CA", "San Francisco, CA", "San Jose, CA", "Santa Ana, CA", "Scottsdale, AZ", "Seattle, WA", "St. Louis, MO", "St. Paul, MN", "St. Petersburg, FL", "Stockton, CA", "Tampa, FL", "Toledo, OH", "Toronto, ON", "Tucson, AZ", "Tulsa, OK", "Vancouver, BC", "Virginia Beach, VA", "Washington, DC", "Wichita, KS", "Winston-Salem, NC"
    ];

    var citiesDatalist = document.getElementById('cities');

    citiesArray.forEach(function(city) {
        var option = document.createElement('option');
        option.value = city;
        citiesDatalist.appendChild(option);
    });
});

      


      window.initMap = initMap;
    </script>
    <style>
      /**
       * @license
       * Copyright 2019 Google LLC. All Rights Reserved.
       * SPDX-License-Identifier: Apache-2.0
       */
      /* Optional: Makes the sample page fill the window. */
      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #container {
        height: 100%;
        display: flex;
      }

      #sidebar {
        flex-basis: 15rem;
        flex-grow: 1;
        padding: 1rem;
        max-width: 30rem;
        height: 100%;
        box-sizing: border-box;
        overflow: auto;
      }

      #map {
        flex-basis: 0;
        flex-grow: 4;
        height: 100%;
      }

      #floating-panel {
        position: absolute;
        top: 10px;
        left: 25%;
        z-index: 5;
        background-color: #fff;
        padding: 5px;
        border: 1px solid #999;
        text-align: center;
        font-family: "Roboto", "sans-serif";
        line-height: 30px;
        padding-left: 10px;
      }

      #floating-panel {
        background-color: #fff;
        border: 0;
        border-radius: 2px;
        box-shadow: 0 1px 4px -1px rgba(0, 0, 0, 0.3);
        margin: 10px;
        padding: 0 0.5em;
        font: 400 18px Roboto, Arial, sans-serif;
        overflow: hidden;
        padding: 5px;
        font-size: 14px;
        text-align: center;
        line-height: 30px;
        height: auto;
      }

      #map {
        flex: auto;
      }

      #sidebar {
        flex: 0 1 auto;
        padding: 0;
      }
      #sidebar > div {
        padding: 0.5rem;
      }
    </style>
  </head>
  <body>
    <div id="floating-panel">
      <strong>Start:</strong>
      <input type="text" list="cities" id="start" />
       <datalist id="cities">
       
       </datalist>
      <br />
      <strong>End:</strong>
      <input type="text" list="cities" id="end" />
       <datalist id="cities">

       </datalist>
      <br />
      <b>Mode of Travel: </b>
      <select id="mode">
        <option value="DRIVING">Driving</option>
        <option value="WALKING">Walking</option>
        <option value="BICYCLING">Bicycling</option>
        <option value="TRANSIT">Transit</option>
      </select>
    </div>
    <div id="container">
      <div id="map"></div>
      <div id="sidebar"></div>
    </div>
    <div style="display: none">
      <div id="floating-panel">
        <strong>Start:</strong>
        <input type="text" list="cities" id="start" />
       <datalist id="cities">

       </datalist>
        <br />
        <strong>End:</strong>
        <input type="text" list="cities" id="end" />
       <datalist id="cities">

       </datalist>
      </div>
    </div>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=APIKEY&callback=initMap&v=weekly"
      defer
    ></script>
  </body>
</html>